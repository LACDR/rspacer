<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Tutorial: creating a document from a table • rspacer</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tutorial: creating a document from a table">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rspacer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/rspacer.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/create_document_from_html.html">Tutorial: creating a document from html</a></li>
    <li><a class="dropdown-item" href="../articles/create_document_from_table.html">Tutorial: creating a document from a table</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/lacdr/rspacer/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Tutorial: creating a document from a table</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/lacdr/rspacer/blob/main/vignettes/articles/create_document_from_table.Rmd" class="external-link"><code>vignettes/articles/create_document_from_table.Rmd</code></a></small>
      <div class="d-none name"><code>create_document_from_table.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="before-you-start">Before you start<a class="anchor" aria-label="anchor" href="#before-you-start"></a>
</h2>
<p>In this tutorial, we describe how to create an RSpace structured
document from a delimited file format, such as Excel, TSV or CSV. We
advice you to read <code><a href="../articles/rspacer.html">vignette("rspacer")</a></code> to make sure that
you are ready to use this upload document. You need to install rspacer
and set up your API url and API key before the start of this
tutorial.</p>
</div>
<div class="section level2">
<h2 id="load-r-libraries">Load R libraries<a class="anchor" aria-label="anchor" href="#load-r-libraries"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lacdr/rspacer" class="external-link">rspacer</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="check-if-the-api-is-available">Check if the API is available<a class="anchor" aria-label="anchor" href="#check-if-the-api-is-available"></a>
</h2>
<p>This code checks if the API is available. The API status should be
OK.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/api_status.html">api_status</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $message</span></span>
<span><span class="co">## [1] "OK"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $rspaceVersion</span></span>
<span><span class="co">## [1] "1.114.0"</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">message</span> <span class="op">==</span> <span class="st">"OK"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="create-a-structured-document-in-rspace">Create a structured document in RSpace<a class="anchor" aria-label="anchor" href="#create-a-structured-document-in-rspace"></a>
</h2>
<p>Create a Template from a Form with four text Fields named “Title”,
“Date”, “Main part” and “Conclusion”. Write down the unique Structured
Document identifier, you will need it later. For us, this identifier was
<code>SD377682</code>. Instructions to design a Template in RSpace can
be found <a href="https://documentation.researchspace.com/article/wxfk9gf0a0-templates" class="external-link">here</a>.</p>
</div>
<div class="section level2">
<h2 id="create-a-small-example-document">Create a small example document<a class="anchor" aria-label="anchor" href="#create-a-small-example-document"></a>
</h2>
<p>Open Excel and create a csv file or run the code chunk below to
create a small example file. It should have two columns. The first one
should have all fields exactly the same as the template. The second
column should have the content of each field in the correct format. If
you use Excel, make sure that dates are saved as a string in the format
dd-mm-yyyy.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_to_upload</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Title"</span>, <span class="st">"Date"</span>, <span class="st">"Main part"</span>, <span class="st">"Conclusion"</span><span class="op">)</span>,</span>
<span>    content <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"example title"</span>, <span class="st">"23-12-2024"</span>, <span class="st">"This is example text."</span>,</span>
<span>                <span class="st">"ready for uploading."</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="upload-the-data">Upload the data<a class="anchor" aria-label="anchor" href="#upload-the-data"></a>
</h2>
<p>To upload the data to the API inbox, this code chunk is sufficient
and returns the created document. It creates a document from your
Template_example.csv. The function works with CSV, TSV and XLSX file
formats. Make sure that the template_id is the identifier of the
template that you previously made in RSpace.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/document_create_from_tabular.html">document_create_from_tabular</a></span><span class="op">(</span></span>
<span>    df <span class="op">=</span> <span class="va">df_to_upload</span>,</span>
<span>    template_id <span class="op">=</span> <span class="st">"SD377682"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Document created: &lt;https://leiden.researchspace.com/globalId/SD424114&gt;</span></span></code></pre>
<p>The function <code><a href="../reference/document_create_from_tabular.html">document_create_from_tabular()</a></code> has more
parameters, for example, to upload the document to a specified notebook
or folder (click the function above to learn more).</p>
<p>How to find the values for these parameters? Browse your RSpace
folders using <code><a href="../reference/folder_tree.html">folder_tree()</a></code> and use either the
<code>id</code> or the <code>globalID</code>. Folder identifiers start
with <code>FL</code>, notebook identifiers start with <code>NB</code>,
structured document identifiers start with <code>SD</code>. For
example:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/folder_tree.html">folder_tree</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## # A tibble: 10 × 7</span></span>
<span><span class="co">##        id globalId name                   created             lastModified        type     owner         </span></span>
<span><span class="co">##     &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;                  &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;    &lt;chr&gt;         </span></span>
<span><span class="co">##  1 356307 SD356307 Gerhard Burger         2024-01-17 14:56:22 2024-01-17 15:04:39 DOCUMENT Gerhard Burger</span></span>
<span><span class="co">##  2 260004 FL260004 LACDR RDM              2023-11-06 10:19:59 2023-11-06 10:19:59 FOLDER   Gerhard Burger</span></span>
<span><span class="co">##  3 242175 FL242175 GABi001_EMP_regulation 2023-05-30 10:14:51 2023-06-14 12:30:47 FOLDER   Gerhard Burger</span></span>
<span><span class="co">##  4 242400 FL242400 Ontologies             2023-06-01 07:23:10 2023-06-01 07:23:10 FOLDER   Gerhard Burger</span></span>
<span><span class="co">##  5 242398 FL242398 Api Inbox              2023-06-01 07:23:08 2023-06-01 07:23:08 FOLDER   Gerhard Burger</span></span>
<span><span class="co">##  6 242182 FL242182 Publications           2023-05-30 11:07:25 2023-05-30 11:07:25 FOLDER   Gerhard Burger</span></span>
<span><span class="co">##  7  21961 FL21961  DDS2 Data management   2023-03-16 09:50:33 2023-03-16 09:50:33 FOLDER   Gerhard Burger</span></span>
<span><span class="co">##  8   7833 FL7833   Templates              2022-12-22 12:32:22 2022-12-22 12:32:22 FOLDER   Gerhard Burger</span></span>
<span><span class="co">##  9   7819 GF7819   Gallery                2022-12-22 12:32:22 2022-12-22 12:32:22 FOLDER   Gerhard Burger</span></span>
<span><span class="co">## 10   7814 FL7814   Shared                 2022-12-22 12:32:22 2022-12-22 12:32:22 FOLDER   Gerhard Burger</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/folder_tree.html">folder_tree</a></span><span class="op">(</span><span class="st">"FL409926"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## # A tibble: 4 × 7</span></span>
<span><span class="co">##       id globalId name                      created             lastModified        type     owner            </span></span>
<span><span class="co">##    &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;                     &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;    &lt;chr&gt;            </span></span>
<span><span class="co">## 1 409948 SD409948 example title             2025-04-24 10:12:56 2025-04-24 10:13:06 DOCUMENT Hanneke Leegwater</span></span>
<span><span class="co">## 2 409942 SD409942 example title             2025-04-24 10:11:01 2025-04-24 10:11:10 DOCUMENT Hanneke Leegwater</span></span>
<span><span class="co">## 3 409929 SD409929 a002_normalize_lipidomics 2025-04-24 10:01:59 2025-04-24 10:02:14 DOCUMENT Hanneke Leegwater</span></span>
<span><span class="co">## 4 409928 SD409928 a001_preprocess_data      2025-04-24 10:01:34 2025-04-24 10:01:52 DOCUMENT Hanneke Leegwater</span></span></code></pre>
<p>Of course you can also find these by going to the web interface of
your RSpace instance. You can also tag your documents using a
<code>tags</code> vector, for example a status like “finished” or “in
progress” or “failed”. If you want to upload attachments to a field, use
the <code>attachments</code> argument. Files will be added in the number
of the field as an attachment. You can optionally replace an existing
Document by specifying an <code>existing_file_id</code>. Use this only
if a file needs to be replaced instead of created.</p>
<p>In this example we add a Quarto code file and a HTML file
Template_example.html as an attachment to the field with number 4. We
also place the file in a specific folder, and add the “tutorial”
tag.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">attachment_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"Template_example.html"</span>, package <span class="op">=</span> <span class="st">"rspacer"</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">matching_code_file</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path_file.html" class="external-link">path_ext_set</a></span><span class="op">(</span><span class="va">attachment_file</span>, <span class="st">".qmd"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## /Users/gerhard/GitHub/rspacer/inst/Template_example.qmd</span></span></code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/document_create_from_tabular.html">document_create_from_tabular</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">df_to_upload</span>,</span>
<span>  template_id <span class="op">=</span> <span class="st">"SD377682"</span>,</span>
<span>  tags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tutorial"</span><span class="op">)</span>,</span>
<span>  attachments <span class="op">=</span> <span class="fu">tibble</span><span class="op">(</span>field <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span>, path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">attachment_file</span>, <span class="va">matching_code_file</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## File uploaded to &lt;https://leiden.researchspace.com/globalId/GL424116&gt;</span></span>
<span><span class="co">## File uploaded to &lt;https://leiden.researchspace.com/globalId/GL424117&gt;</span></span>
<span><span class="co">## Document created: &lt;https://leiden.researchspace.com/globalId/SD424118&gt;</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="uploading-directly-from-file">Uploading directly from file<a class="anchor" aria-label="anchor" href="#uploading-directly-from-file"></a>
</h2>
<p>You can also directly upload tabular data from files using the
<code><a href="../reference/document_create_from_tabfile.html">document_create_from_tabfile()</a></code> function. A small example,
with the example data from before:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file_name</span> <span class="op">&lt;-</span> <span class="st">"Template_example.csv"</span></span>
<span><span class="va">df_to_upload</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">write_csv</span><span class="op">(</span><span class="va">file_name</span>, col_names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co"># the csv should not contain the column names</span></span>
<span></span>
<span><span class="co"># now we upload</span></span>
<span><span class="fu"><a href="../reference/document_create_from_tabfile.html">document_create_from_tabfile</a></span><span class="op">(</span></span>
<span>    path <span class="op">=</span> <span class="va">file_name</span>,</span>
<span>    template_id <span class="op">=</span> <span class="st">"SD377682"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Document created: &lt;https://leiden.researchspace.com/globalId/SD424120&gt;</span></span></code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gerhard Burger, Hanneke Leegwater.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
