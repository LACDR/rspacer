<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Tutorial document_create_from_html() • rspacer</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tutorial document_create_from_html()">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rspacer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/rspacer.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Tutorial_document_create_from_html.html">Tutorial document_create_from_html()</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/burgerga/rspacer/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Tutorial document_create_from_html()</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/burgerga/rspacer/blob/main/vignettes/articles/Tutorial_document_create_from_html.Rmd" class="external-link"><code>vignettes/articles/Tutorial_document_create_from_html.Rmd</code></a></small>
      <div class="d-none name"><code>Tutorial_document_create_from_html.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="before-you-start">Before you start<a class="anchor" aria-label="anchor" href="#before-you-start"></a>
</h2>
<p>In this tutorial, we describe how to create an Rspace structured
document from a Quarto file. We advice you to read the rspacer Get
started website on <a href="https://burgerga.github.io/rspacer/index.html" class="uri">https://burgerga.github.io/rspacer/index.html</a> to make
sure that you are ready to use this upload document. You need to install
rspacer and set up your API url and API key before the start of this
tutorial.</p>
</div>
<div class="section level2">
<h2 id="load-r-libraries">1. Load R libraries<a class="anchor" aria-label="anchor" href="#load-r-libraries"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/" class="external-link">here</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/burgerga/rspacer" class="external-link">rspacer</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="check-if-the-api-is-available">2. Check if the API is available<a class="anchor" aria-label="anchor" href="#check-if-the-api-is-available"></a>
</h2>
<p>This code checks if the API is available. The API status should be
OK.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/api_status.html">api_status</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $message</span></span>
<span><span class="co">## [1] "OK"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $rspaceVersion</span></span>
<span><span class="co">## [1] "1.103.1"</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">message</span> <span class="op">==</span> <span class="st">"OK"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="create-a-structured-document-in-rspace">3. Create a structured document in Rspace<a class="anchor" aria-label="anchor" href="#create-a-structured-document-in-rspace"></a>
</h2>
<p>Create a Template from a Form with four text Fields named “Title”,
“Date”, “Main part” and “Conclusion”. Write down the unique Structured
Document identifier, you will need it later. Instructions to design a
Template in Rspace can be found here: <a href="https://documentation.researchspace.com/article/wxfk9gf0a0-templates" class="external-link uri">https://documentation.researchspace.com/article/wxfk9gf0a0-templates</a>.</p>
</div>
<div class="section level2">
<h2 id="create-a-small-example-document">4. Create a small example document<a class="anchor" aria-label="anchor" href="#create-a-small-example-document"></a>
</h2>
<ol style="list-style-type: decimal">
<li>The rspacer package has an example file. In RStudio, go to File &gt;
New File &gt; R Markdown. At the moment (28-10-2024) there is not yet an
option to create Quarto files from template, which is why we chose to
provide the file as an R Markdown template.</li>
<li>On the left, click From Template.</li>
<li>Choose the rspacer Template example. Save the file as a Quarto file
(.qmd).</li>
<li>Render the file to a html report.</li>
</ol>
<p>Alternatively, you can create a new Quarto document. Include the same
headers as the Rspace Template that you previously created in Step 3,
and make sure that these headers all have two hashtags (h2 headers, with
##). You can write any code, or use h3 or h4 headers (with three or four
hashtags), as long the <code>h2</code> headers are identical to your
structured document template.</p>
</div>
<div class="section level2">
<h2 id="specify-the-file-name-of-the-file-to-upload">Specify the file name of the file to upload<a class="anchor" aria-label="anchor" href="#specify-the-file-name-of-the-file-to-upload"></a>
</h2>
<p>Rspacer needs to know which file you want to upload. In this
tutorial, we want to create a structured document from the file
“Template_example.html” that we made in Step 4, and we want to upload
the .qmd file as an attachment. We recommend to work with relative paths
from within an R project and specify these paths using the here package.
If this is not what you want, you need to specify the absolute file
path. The code below assumes that the html file and qmd file have the
same filename. If this is not the case, change both the file_name and
the matching_code_file variables.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">file_name</span> <span class="op">&lt;-</span> <span class="fu">here</span><span class="op">(</span><span class="st">"man/example/Template_example.html"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "C:/Users/hanneke/Documents/rspacer/man/example/Template_example.html"</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">matching_code_file</span> <span class="op">&lt;-</span> <span class="fu">str_replace</span><span class="op">(</span><span class="va">file_name</span>, <span class="st">".html$"</span>, <span class="st">".qmd"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "C:/Users/hanneke/Documents/rspacer/man/example/Template_example.qmd"</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">file_name</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">matching_code_file</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="specify-the-template-and-folder-to-upload-to">Specify the template and folder to upload to<a class="anchor" aria-label="anchor" href="#specify-the-template-and-folder-to-upload-to"></a>
</h2>
<p>You can ‘walk’ through folders until you find the folder or notebook
where you want to upload the Structured Document, using the
folder_tree() function in rspacer. If you want to replace a file, also
define the existing file id. If you have a more complicated document
than a Basic Document, you have to specify the identifier of the
Template as well. Folder identifiers start with FL. Notebook identifiers
start with NB. Structured document identifiers start with SD.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/folder_tree.html">folder_tree</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## # A tibble: 8 × 9</span></span>
<span><span class="co">##       id globalId name                      created                  lastModified        parentFolderId type  `_links` owner       </span></span>
<span><span class="co">##    &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;                     &lt;chr&gt;                    &lt;chr&gt;                        &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;list&gt;      </span></span>
<span><span class="co">## 1 368771 FL368771 i001_PhD_Hanneke          2024-04-12T11:37:28.954Z 2024-04-12T11:37:2…           2790 FOLD… &lt;list&gt;   &lt;named list&gt;</span></span>
<span><span class="co">## 2 366764 FL366764 Api Inbox                 2024-03-28T11:18:35.212Z 2024-03-28T11:18:3…           2790 FOLD… &lt;list&gt;   &lt;named list&gt;</span></span>
<span><span class="co">## 3 239405 FL239405 Ontologies                2023-04-17T12:54:17.626Z 2023-04-17T12:54:1…           2790 FOLD… &lt;list&gt;   &lt;named list&gt;</span></span>
<span><span class="co">## 5  14411 FL14411  Testing_Rspace            2023-01-12T21:07:31.965Z 2023-01-12T21:07:3…           2790 FOLD… &lt;list&gt;   &lt;named list&gt;</span></span>
<span><span class="co">## 6   2810 FL2810   Templates                 2022-12-22T12:19:03.336Z 2022-12-22T12:19:0…           2790 FOLD… &lt;list&gt;   &lt;named list&gt;</span></span>
<span><span class="co">## 7   2796 GF2796   Gallery                   2022-12-22T12:19:03.285Z 2022-12-22T12:19:0…           2790 FOLD… &lt;list&gt;   &lt;named list&gt;</span></span>
<span><span class="co">## 8   2791 FL2791   Shared                    2022-12-22T12:19:03.267Z 2022-12-22T12:19:0…           2790 FOLD… &lt;list&gt;   &lt;named list&gt;</span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#folder_tree("") # Specify folder ID in brackets to keep walking.</span></span>
<span></span>
<span><span class="va">folder_id</span> <span class="op">&lt;-</span> <span class="st">""</span> <span class="co"># Specify folder ID for upload</span></span>
<span><span class="va">template_id</span> <span class="op">&lt;-</span> <span class="st">""</span> <span class="co"># SD identifier of the template</span></span>
<span><span class="va">field_nr_for_code</span> <span class="op">&lt;-</span> <span class="fl">0</span> <span class="co"># Specify the field in which the code file needs to be attached.</span></span>
<span><span class="va">existing_file_id</span> <span class="op">&lt;-</span> <span class="st">""</span> <span class="co"># Optional, used if one wants to replace a file. Leave empty string if no file needs to be created.</span></span>
<span></span>
<span><span class="va">tags</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="co"># You can add multiple tags in a vector. For example a grant number, or "finished" or "in progress" or "failed".</span></span></code></pre></div>
<div class="section level3">
<h3 id="upload-the-file">Upload the file<a class="anchor" aria-label="anchor" href="#upload-the-file"></a>
</h3>
<p>Create an RSpace document using the code chunk below. It creates a
document from your Template_example.html rendered file, and places the
.qmd with the same name in the fourth field of the structured document.
If no folder_id is specified, the function document_create_from_html()
creates the document in the ‘API Inbox’. Optionally, you can add tags or
replace an entire document. Make sure that the template_id is the
identifier of the template that you previously made in Rspace. To upload
the document and attachment to the API inbox, this code chunk is
sufficient:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/document_create_from_html.html">document_create_from_html</a></span><span class="op">(</span></span>
<span>    path <span class="op">=</span> <span class="va">file_name</span>,</span>
<span>    template_id <span class="op">=</span> <span class="st">"SD377682"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Document created: &lt;https://leiden.researchspace.com/globalId/SD389616&gt;</span></span></code></pre>
<p>The function document_create_from_html has more parameters, for
example to upload the document to the specified notebook or folder. If
you want to upload a code file as well, it will be added in the number
of the field as an attachment. Use the existing_file_id only if a file
needs to be replaced instead of created.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="va">existing_file_id</span> <span class="op">==</span> <span class="st">""</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/document_create_from_html.html">document_create_from_html</a></span><span class="op">(</span></span>
<span>    path <span class="op">=</span> <span class="va">file_name</span>,</span>
<span>    template_id <span class="op">=</span> <span class="va">template_id</span>,</span>
<span>    folder_id <span class="op">=</span> <span class="va">folder_id</span>,</span>
<span>    tags <span class="op">=</span> <span class="va">tags</span>,</span>
<span>    attachment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>field <span class="op">=</span> <span class="va">field_nr_for_code</span>, path <span class="op">=</span> <span class="va">matching_code_file</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/document_create_from_html.html">document_create_from_html</a></span><span class="op">(</span></span>
<span>    path <span class="op">=</span> <span class="va">file_name</span>,</span>
<span>    template_id <span class="op">=</span> <span class="va">template_id</span>,</span>
<span>    folder_id <span class="op">=</span> <span class="va">folder_id</span>,</span>
<span>    tags <span class="op">=</span> <span class="va">tags</span>,</span>
<span>    attachment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>field <span class="op">=</span> <span class="va">field_nr_for_code</span>, path <span class="op">=</span> <span class="va">matching_code_file</span><span class="op">)</span>,</span>
<span>    existing_file_id  <span class="op">=</span> <span class="va">existing_file_id</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="session-info">Session info<a class="anchor" aria-label="anchor" href="#session-info"></a>
</h2>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## R version 4.3.0 (2023-04-21 ucrt)</span></span>
<span><span class="co">## Platform: x86_64-w64-mingw32/x64 (64-bit)</span></span>
<span><span class="co">## Running under: Windows 11 x64 (build 22631)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Matrix products: default</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## locale:</span></span>
<span><span class="co">## [1] LC_COLLATE=Dutch_Netherlands.utf8  LC_CTYPE=Dutch_Netherlands.utf8    LC_MONETARY=Dutch_Netherlands.utf8</span></span>
<span><span class="co">## [4] LC_NUMERIC=C                       LC_TIME=Dutch_Netherlands.utf8    </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## time zone: Europe/Amsterdam</span></span>
<span><span class="co">## tzcode source: internal</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## attached base packages:</span></span>
<span><span class="co">## [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## other attached packages:</span></span>
<span><span class="co">##  [1] lubridate_1.9.2    forcats_1.0.0      stringr_1.5.0      dplyr_1.1.2        purrr_1.0.1        readr_2.1.4       </span></span>
<span><span class="co">##  [7] tidyr_1.3.0        tibble_3.2.1       ggplot2_3.4.2      tidyverse_2.0.0    here_1.0.1         rspacer_0.1.0.9001</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## loaded via a namespace (and not attached):</span></span>
<span><span class="co">##  [1] jsonlite_1.8.4   gtable_0.3.3     compiler_4.3.0   tidyselect_1.2.0 xml2_1.3.3       scales_1.2.1     yaml_2.3.7      </span></span>
<span><span class="co">##  [8] fastmap_1.1.1    R6_2.5.1         generics_0.1.3   curl_5.2.3       httr2_1.0.5      knitr_1.42       munsell_0.5.0   </span></span>
<span><span class="co">## [15] rprojroot_2.0.3  pillar_1.9.0     tzdb_0.3.0       rlang_1.1.0      utf8_1.2.3       stringi_1.7.12   xfun_0.39       </span></span>
<span><span class="co">## [22] timechange_0.2.0 cli_3.6.1        withr_2.5.0      magrittr_2.0.3   rvest_1.0.3      digest_0.6.31    grid_4.3.0      </span></span>
<span><span class="co">## [29] rstudioapi_0.14  rappdirs_0.3.3   hms_1.1.3        lifecycle_1.0.3  vctrs_0.6.5      evaluate_0.20    glue_1.6.2      </span></span>
<span><span class="co">## [36] fansi_1.0.4      colorspace_2.1-0 httr_1.4.5       rmarkdown_2.21   tools_4.3.0      pkgconfig_2.0.3  htmltools_0.5.5</span></span></code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gerhard Burger, Hanneke Leegwater.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
